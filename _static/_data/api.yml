- title: Submit Manifest
  description: Submit a new manifest to the eManifest system
  http_verb: POST
  resource_url: /manifest/submit/:manifest_tracking_number
  path_variables: {
     manifest_tracking_number: the tracking number from Line 4 of form 8700-22
  }
  request_body: |
      Manifest information in JSON format, all fields presently optional
      and unvalidated
          {
            "transporters": [
                {
                    "company_name": "Transporter1 Co.",
                    "us_epa_id_number": "JU987987876",
                    "signatory_name": "JSTransporter Signature",
                    "transporter_signatory_date_month": "10",
                    "transporter_signatory_date_day": "20",
                    "transporter_signatory_date_year": "2015"
                }
            ],
            "manifest_items": [
                {
                    "proper_shipping_name": "TechnologicalWaste123",
                    "proper_hazard_class": "I",
                    "id_number": "12345",
                    "packing_group": "II",
                    "number_of_containers": "1",
                    "container_type_": {
                        "0": "BA"
                    },
                    "total_quantity": "123",
                    "unit_wt_vol": "G",
                    "epa_waste_codes": [
                        "Pzaj"
                    ],
                    "state_waste_codes": [
                        "pzaj"
                    ]
                }
            ],
            "generator_us_epa_id_number": "JU123321123",
            "generator_manifest_tracking_number": "888777666123",
            "generator_emergency_response_phone": "234-567-8901",
            "generator_name": "J Main St Waste Co",
            "generator_address_1": "123 Main St",
            "generator_address_city": "Elephant Butte",
            "generator_address_state": "NM",
            "generator_address_zip_code": "87936",
            "generator_phone_number": "234-567-8901",
            "generator_site_address_same_as_mailing_address": "yes",
            "designated_facility_name": "J Waste Disposal CO.",
            "designated_facility_address_1": "123 Industrial Blvd",
            "designated_facility_address_city": "Fictitious",
            "designated_facility_address_state": "NJ",
            "designated_facility_address_zip_code": "01213",
            "designated_facility_phone_number": "987-654-3210",
            "designated_facility_us_epa_id_number": "JU555555555",
            "waste_non_hazardous_material_present": "no",
            "waste_handling_instructions": "No special handling required.",
            "waste_pcb_description": "No PCB",
            "waste_generator_signatory": "JUSignature Lastname",
            "waste_generator_signatory_date_month": "10",
            "waste_generator_signatory_date_day": "20",
            "waste_generator_signatory_date_year": "2015",
            "international_shipment": "no",
            "report_management_method_codes": [
                "m123"
            ],
            "certification_name": "JUFacility Signature",
            "certification_date_month": "10",
            "certification_date_day": "20",
            "certification_date_year": "2015"
          }
  response: No content.
  response_http_status_codes: {
     "201 Created": "Upon successful creation of the manifest in the eManifest system"
  }
  response_details: The Location header denotes where the
                    manifest may be retrieved
                    (e.g. /api/manifest/id/:emanifest_id)

- title: Get Manifest
  description: Retrieve a manifest previously submitted to the
               eManifest system
  http_verb: GET
  path_variables: {
     emanifest_id: the numeric unique identifier for the manifest in the eManifest system (not the Manifest Tracking Number from Line 4 of form 8700-22)
  }
  resource_url: /manifest/id/:emanifest_id
  response_format: JSON
  response: |
      {
        "id": 95,
        "content": {
            "transporters": [
                {
                    "company_name": "Transporter1 Co.",
                    "us_epa_id_number": "JU987987876",
                    "signatory_name": "JSTransporter Signature",
                    "transporter_signatory_date_month": "10",
                    "transporter_signatory_date_day": "20",
                    "transporter_signatory_date_year": "2015"
                }
            ],
            "manifest_items": [
                {
                    "proper_shipping_name": "TechnologicalWaste123",
                    "proper_hazard_class": "I",
                    "id_number": "12345",
                    "packing_group": "II",
                    "number_of_containers": "1",
                    "container_type_": {
                        "0": "BA"
                    },
                    "total_quantity": "123",
                    "unit_wt_vol": "G",
                    "epa_waste_codes": [
                        "Pzaj"
                    ],
                    "state_waste_codes": [
                        "pzaj"
                    ]
                }
            ],
            "generator_us_epa_id_number": "JU123321123",
            "generator_manifest_tracking_number": "888777666123",
            "generator_emergency_response_phone": "234-567-8901",
            "generator_name": "J Main St Waste Co",
            "generator_address_1": "123 Main St",
            "generator_address_city": "Elephant Butte",
            "generator_address_state": "NM",
            "generator_address_zip_code": "87936",
            "generator_phone_number": "234-567-8901",
            "generator_site_address_same_as_mailing_address": "yes",
            "designated_facility_name": "J Waste Disposal CO.",
            "designated_facility_address_1": "123 Industrial Blvd",
            "designated_facility_address_city": "Fictitious",
            "designated_facility_address_state": "NJ",
            "designated_facility_address_zip_code": "01213",
            "designated_facility_phone_number": "987-654-3210",
            "designated_facility_us_epa_id_number": "JU555555555",
            "waste_non_hazardous_material_present": "no",
            "waste_handling_instructions": "No special handling required.",
            "waste_pcb_description": "No PCB",
            "waste_generator_signatory": "JUSignature Lastname",
            "waste_generator_signatory_date_month": "10",
            "waste_generator_signatory_date_day": "20",
            "waste_generator_signatory_date_year": "2015",
            "international_shipment": "no",
            "report_management_method_codes": [
                "m123"
            ],
            "certification_name": "JUFacility Signature",
            "certification_date_month": "10",
            "certification_date_day": "20",
            "certification_date_year": "2015"
          },
        "created_at": "2015-10-20T15:35:44.175Z",
        "updated_at": "2015-10-20T15:36:27.689Z",
        "activity_id": "_7f0ea6e2-99fa-4efa-bc2a-4febe40ec8ff",
        "document_id": "d976f1b4-a2a2-41f8-b2d7-6ae02e257634"
      }
  response_details: The "id" value is the unique identifier for the manifest in the eManifest system while
                    content.generator_manifest_tracking_number represents the the Manifest Tracking Number
                    from Line 4 of form 8700-22.
  response_http_status_codes: {
     "200 OK": "If found",
     "404 Not Found": "If the given id does not match an existing manifest"
  }

- title: Search for Manifests
  description: Search for manifests matching provided criteria. Currently returns all manifests
  http_verb: GET
  resource_url: /manifest/search
  parameters: |
    To be determined. None presently implemented
  response_format: JSON
  response: |
    [
      {
        "id": 53,
           ... manifest content here (see Get Manifest response)
      },
      {
        "id": 21,
           ... manifest content here
      },
      {
        "id": 42,
           ... manifest content here
      },
      ...
    ]

- title: Authenticate User
  description: Authenticates a user with CROMERR for signing a manifest. Values in the response are needed to sign the manifest.
  http_verb: POST
  resource_url: /user/authenticate
  request_body: |
    {
      user_id: "CDX user id", 
      password: "CDX password"
    }
  request_body_parameters: {
    user_id: "CDX user id",
    password: "CDX password"
  }
  response_format: JSON
  response: |
    {
      "token": "csm:IiKaBeSJKqLQCD [...] Y6_HuVuzpDk,.",
      "activity_id": "_633a4568b-811e-471b-92b5-a7a8bca12fea",
      "question": {
        "question_id": "15",
        "question_text": "What was your high school's mascot?"
      },
      "user_id": "CDX user id"
    }


- title: Sign Manifest
  description: Signs a specified manifest with CROMERR.
  http_verb: POST
  resource_url: /manifest/sign
  request_body: |
    {
      "activity_id": "_633a4568b-811e-471b-92b5-a7a8bca12fea",
      "answer": "question answer text",
      "id": ":emanifest_id",
      "question_id": "15",
      "token": "csm:IiKaBeSJKqLQCD [...] Y6_HuVuzpDk,.",
      "user_id": "CDX user id"
    }
  request_body_parameters: {
    activity_id: "from previous Authenticate User response",
    answer: "CDX account's answer to the question from Authenticate User response",
    id: "the numeric unique identifier for the manifest in the eManifest system (not the Manifest Tracking Number from Line 4 of form 8700-22)",
    question_id: "from previous Authenticate User response",
    token: "from previous Authenticate User response",
    user_id: "CDX user id"
  }
  response_format: JSON
  response: |
    {
      "document_id": "be83916a-a4d3-4ae8-aa68-9d56c16b1bce"
    }
  response_details: The CDX-generated documentId and activityId values will now appear as fields in the
                    signed manifest when retrieving the manifest data
