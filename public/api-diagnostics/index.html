<!DOCTYPE html>
<html>
  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>e-Manifest API Diagnostics | US EPA</title>
    <meta name="description" content="EPA e-Manifest
">
    
    <link rel="canonical" href="https://e-manifest.18f.gov/api-diagnostics/">
    
    <!-- Compiled CSS  -->
    <link rel="stylesheet" href="/assets/usa/css/main.css">
    <link rel="stylesheet" href="/assets/usa/css/fixes.css">
    <link rel="stylesheet" href="/assets/css/web.css">
    <link rel="stylesheet" href="/assets/css/main.css">
    

    <!-- Custom <head> content; for web fonts, favicon, etc. -->
    
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>

<!--
Favicons:

<link rel="shortcut icon" type="image/ico" href="/assets/img/favicon.ico">

<link rel="icon" type="image/png" href="/assets/img/favicon.png">
-->

    

  </head>
  
  <body class="">
    <div class="usa-disclaimer">
  <div class='app-width'>
    <span class="usa-disclaimer-official">
      <img class="usa-flag_icon" alt="US flag signifying that this is a United States Federal Government website" src="/assets/usa/img/us_flag_small.png">
      An official website of the United States Government
    </span>
    <span class="usa-disclaimer-stage">This site is currently in discovery. <a href="https://18f.gsa.gov/dashboard/stages/#discovery">Learn more.</a></span>
  </div>
</div>


    <div class="wrapper">
      
      
        



<header class="site-header">
  <div class="content">
    
    <nav>
      
      <a class="site-logo" href="/">
        
          <img class="site-logo-img" src="/assets/img/epa-logo-100px.png" alt="logo">
        
        EPA e-Manifest
      </a>
      
      
      
      <ul class="site-nav">
        
          <li><a href="/api">API</a></li>
        
      </ul>
      
      <a href="javascript:toggleMobileMenu();">
        <div id="site-nav-mobile" class="site-nav-mobile">
          
          <svg id="site-mobile-menu-icon-open" class="site-mobile-menu-icon" width="25px" height="20px" viewBox="0 0 25 20" stroke-width="2" stroke-linecap="square">
            <path d="M1,1 L24,1"></path>
            <path d="M1,10 L24,10"></path>
            <path d="M1,19 L24,19"></path>
          </svg>
          
          <svg id="site-mobile-menu-icon-close" class="site-mobile-menu-icon" width="25px" height="20px" viewBox="0 0 25 20" stroke-width="2" stroke-linecap="square" style="display:none">
            <path d="M4,2 L21,18"></path>
            <path d="M4,18 L21,2"></path>
          </svg>
          
        </div>
      </a>
      
      
      
    </nav>
    
    <div id="site-mobile-menu" class="site-mobile-menu" style="display:none">
      <ul>
        
          <a href="/api"><li>API</li></a>
        
      </ul>
    </div>
    
  </div>
</header>




      
      <div class="main">
        <div class="content">
  
  
  
  
  <div class="page-header">
    
    <h1>e-Manifest API Diagnostics</h1>
    
    
    
  </div>
  
  
  


  
  <div class="page-content">
    <h1>Submit Manifest</h1>

<p><strong>POST</strong> /api/0.1/manifest/submit/12345<br>
Data: <code>{ &quot;manifest&quot;: 12345 }</code><br>
<a href="javascript:submitManifest();">Run »</a></p>

<p>Response:<br>
<pre><code id="submit-manifest-response"></code></pre></p>

<h1>Search for Manifests</h1>

<p><strong>GET</strong> /api/0.1/manifest/search<strong>?city=madison&amp;state=wi</strong><br>
<a href="javascript:searchManifest();">Run »</a></p>

<p>Response:<br>
<pre><code id="search-manifest-response"></code></pre></p>

<h1>Get a Manifest by e-Manifest ID</h1>

<p><strong>GET</strong> /api/0.1/manifest/id/*<br>
<label for="manifest_id">e-Manifest ID: <input id="manifest_id"></label><br>
<a href="javascript:getManifest();">Run »</a></p>

<p>Response:<br>
<pre><code id="get-manifest-response"></code></pre></p>

<h1>Get a Manifest by Manifest Tracking Number</h1>

<p><strong>GET</strong> /api/0.1/manifest/*<br>
<label for="get_manifest_tracking_number">Manifest Tracking Number: <input id="get_manifest_tracking_number"></label><br>
<a href="javascript:getManifestByTrackingNumber();">Run »</a></p>

<p>Response:<br>
<pre><code id="get-manifest-tracking-number-response"></code></pre></p>

<h1>Update a Manifest by e-Manifest ID</h1>

<p><strong>PATCH</strong> /api/0.1/manifest/id/*<br>
<label for="update_manifest_id">e-Manifest ID: <input id="update_manifest_id"></label><br>
<label for="update_manifest_generator_name">Generator Name: <input id="update_manifest_generator_name"></label><br>
Data: <code>[{ &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/generator/name&quot;, &quot;value&quot;: &quot;name entered above&quot; }]</code><br>
<a href="javascript:updateManifest();">Run »</a></p>

<p>Response:<br>
<pre><code id="update-manifest-response"></code></pre></p>

<h1>Update a Manifest by Manifest Tracking Number</h1>

<p><strong>PATCH</strong> /api/0.1/manifest/*<br>
<label for="update_manifest_tracking_number">Manifest Tracking Number: <input id="update_manifest_tracking_number"></label><br>
<label for="update_manifest_tracking_number_generator_name">Generator Name: <input id="update_manifest_tracking_number_generator_name"></label><br>
Data: <code>[{ &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/generator/name&quot;, &quot;value&quot;: &quot;name entered above&quot; }]</code><br>
<a href="javascript:updateManifestByTrackingNumber();">Run »</a></p>

<p>Response:<br>
<pre><code id="update-manifest-tracking-number-response"></code></pre></p>

<h1>Reset Database</h1>

<p>Warning: All data will be deleted and reset!<br>
<a href="javascript:resetDatabase();">Reset Database »</a></p>

<h1>Authenticate User</h1>

<p><strong>POST</strong> /api/0.1/user/authenticate<br>
Data: <code>{ &quot;user_id&quot;: username, &quot;password&quot;: password  }</code><br>
<label for="username">CDX username: <input id="username"></label><br>
<label for="password">CDX password: <input type="password" id="password"></label><br>
<a href="javascript:authenticateUser();">Run »</a></p>

<p>Response:<br>
<pre><code id="authenticate-user-response"></code></pre></p>

<h1>Sign Manifest by e-Manifest ID</h1>

<p><strong>POST</strong> /api/0.1/manifest/sign<br>
(data from authenticate user request + answer to the question)<br>
Data: <code>{ &quot;token&quot;: token, &quot;activity_id&quot;: activity id, &quot;user_id&quot;: user id,<br>
&quot;question_id&quot;: question id, &quot;answer&quot;: answer, &quot;id&quot;: e-Manifest id }</code><br>
<label for="sign_manifest_id">e-Manifest ID: <input id="sign_manifest_id"></label><br>
<label for="answer">Answer to CDX question: <input type="password" id="answer"></label><br>
<label for="token">CROMERR token: <input id="token"></label><br>
<label for="activity_id">CROMERR activity id: <input id="activity_id"></label><br>
<label for="user_id">CDX user id: <input id="user_id"></label><br>
<label for="question_id">CDX question id: <input id="question_id"></label><br>
<a href="javascript:signManifest();">Run »</a></p>

<p>Response:<br>
<pre><code id="sign-manifest-response"></code></pre></p>

<h1>Sign Manifest by Manifest Tracking Number</h1>

<p><strong>POST</strong> /api/0.1/manifest/signByTrackingNumber<br>
(data from authenticate user request + answer to the question)<br>
Data: <code>{ &quot;token&quot;: token, &quot;activity_id&quot;: activity id, &quot;user_id&quot;: user id,<br>
&quot;question_id&quot;: question id, &quot;answer&quot;: answer, &quot;manifest_tracking_number&quot;: manifest_tracking_number }</code><br>
<label for="sign_by_manifest_tracking_number">Manifest Tracking Number: <input id="sign_by_manifest_tracking_number"></label><br>
<label for="answer_by_manifest_tracking_number">Answer to CDX question: <input type="password" id="answer_by_manifest_tracking_number"></label><br>
<label for="token_by_manifest_tracking_number">CROMERR token: <input id="token_by_manifest_tracking_number"></label><br>
<label for="activity_id_by_manifest_tracking_number">CROMERR activity id: <input id="activity_id_by_manifest_tracking_number"></label><br>
<label for="user_id_by_manifest_tracking_number">CDX user id: <input id="user_id_by_manifest_tracking_number"></label><br>
<label for="question_id_by_manifest_tracking_number">CDX question id: <input id="question_id_by_manifest_tracking_number"></label><br>
<a href="javascript:signManifestByTrackingNumber();">Run »</a></p>

<p>Response:<br>
<pre><code id="sign-manifest-by-tracking-number-response"></code></pre></p>

<h1>Get Management Method Codes</h1>

<p><strong>GET</strong> /api/0.1/method_code<br>
<a href="javascript:getMethodCodes();">Run »</a></p>

<p>Response:<br>
<pre><code id="get-method-codes-response"></code></pre></p>

<script>
  
  function prettyJson(data) {
    return JSON.stringify(data, null, 2);
  }

  var showSuccessfulResponse = function(nodeSelector) {
    return function(data, textStatus, xhr) {
      var res = xhr.status + " " + xhr.statusText;
      res += "\n" + prettyJson(data);
      $(nodeSelector).text(res);
    };
  };

  var showFailureResponse = function(nodeSelector) {
    return function(xhr, textStatus, error) {
      var res = xhr.status + " " + xhr.statusText;
      $(nodeSelector).text(res);
    };
  };
  
  function submitManifest() {
    $.ajax({
      type: 'POST',
      url: '/api/0.1/manifest/submit/12345',
      data: '{ "manifest": 12345 }'
    })
    .done(showSuccessfulResponse('#submit-manifest-response'))
    .fail(showFailureResponse('#submit-manifest-response'));
  };
  
  function searchManifest() {
    $.ajax({
      type: 'GET',
      url: '/api/0.1/manifest/search?city=madison&state=wi',
    })
    .done(showSuccessfulResponse('#search-manifest-response'))
    .fail(showFailureResponse('#search-manifest-response'));
  };
  
  function resetDatabase() {
    /*$.get('/reset', function(data) {
      alert(data);
    });*/
  };

  function authenticateUser() {
    var username = $("#username").val();
    var password = $("#password").val();
    
    $.ajax({
      type: 'POST',
      url: '/api/0.1/user/authenticate',
      contentType: 'application/json',
      data: JSON.stringify({ "user_id": username, "password": password })
    })
    .done(function(data, textStatus, xhr) {
      var res = xhr.status + " " + xhr.statusText;
      res += "\n" + prettyJson(data);
      $('#authenticate-user-response').text(res);
      $('#user_id').val(data["user_id"]);
      $('#token').val(data["token"]);
      $('#activity_id').val(data["activity_id"]);
      $('#question_id').val(data["question"]["question_id"]);
      $('#answer').val("");
      $('#user_id_by_manifest_tracking_number').val(data["user_id"]);
      $('#token_by_manifest_tracking_number').val(data["token"]);
      $('#activity_id_by_manifest_tracking_number').val(data["activity_id"]);
      $('#question_id_by_manifest_tracking_number').val(data["question"]["question_id"]);
      $('#answer_by_manifest_tracking_number').val("");
    })
    .fail(showFailureResponse('#authenticate-user-response'));
  };

  function signManifest() {
    var manifest_id = $("#sign_manifest_id").val();
    var token = $("#token").val();
    var activity_id = $("#activity_id").val();
    var user_id = $("#user_id").val();
    var question_id = $("#question_id").val();
    var answer = $("#answer").val();
    
    $.ajax({
      type: 'POST',
      url: '/api/0.1/manifest/sign',
      contentType: 'application/json',
      data: JSON.stringify({ "id": manifest_id, "token": token,
            "activity_id": activity_id, "user_id": user_id,
            "question_id": question_id, "answer": answer })
    })
    .done(showSuccessfulResponse('#sign-manifest-response'))
    .fail(showFailureResponse('#sign-manifest-response'));
  };
  
  function signManifestByTrackingNumber() {
    var manifest_tracking_number = $("#sign_by_manifest_tracking_number").val();
    var token = $("#token_by_manifest_tracking_number").val();
    var activity_id = $("#activity_id_by_manifest_tracking_number").val();
    var user_id = $("#user_id_by_manifest_tracking_number").val();
    var question_id = $("#question_id_by_manifest_tracking_number").val();
    var answer = $("#answer_by_manifest_tracking_number").val();
    
    $.ajax({
      type: 'POST',
      url: '/api/0.1/manifest/signByTrackingNumber',
      contentType: 'application/json',
      data: JSON.stringify({ "manifest_tracking_number": manifest_tracking_number, "token": token,
            "activity_id": activity_id, "user_id": user_id,
            "question_id": question_id, "answer": answer })
    })
    .done(showSuccessfulResponse('#sign-manifest-by-tracking-number-response'))
    .fail(showFailureResponse('#sign-manifest-by-tracking-number-response'));
  };
  
  function getManifest() {
    var manifest_id = $("#manifest_id").val();
    
    $.ajax({
      type: 'GET',
      url: '/api/0.1/manifest/id/'+manifest_id
    })
    .done(showSuccessfulResponse('#get-manifest-response'))
    .fail(showFailureResponse('#get-manifest-response'));
  };
  
  function getManifestByTrackingNumber() {
    var manifest_tracking_number = $("#get_manifest_tracking_number").val();
    
    $.ajax({
      type: 'GET',
      url: '/api/0.1/manifest/'+manifest_tracking_number
    })
    .done(showSuccessfulResponse('#get-manifest-tracking-number-response'))
    .fail(showFailureResponse('#get-manifest-tracking-number-response'));
  };
  
  function updateManifest() {
    var manifest_id = $("#update_manifest_id").val();
    var generator_name = $("#update_manifest_generator_name").val();
    $.ajax({
      type: 'PATCH',
      url: '/api/0.1/manifest/id/'+manifest_id,
      data: JSON.stringify([{ "op": "replace", "path": "/generator/name", "value": generator_name }])
    })
    .done(showSuccessfulResponse('#update-manifest-response'))
    .fail(showFailureResponse('#update-manifest-response'));
  };
  
  function updateManifestByTrackingNumber() {
    var manifest_tracking_number = $("#update_manifest_tracking_number").val();
    var generator_name = $("#update_manifest_tracking_number_generator_name").val();
    $.ajax({
      type: 'PATCH',
      url: '/api/0.1/manifest/'+manifest_tracking_number,
      data: JSON.stringify([{ "op": "replace", "path": "/generator/name", "value": generator_name }])
    })
    .done(showSuccessfulResponse('#update-manifest-tracking-number-response'))
    .fail(showFailureResponse('#update-manifest-tracking-number-response'));
  };
  
  function getMethodCodes() {
    $.ajax({
      type: 'GET',
      url: '/api/0.1/method_code'
    })
    .done(showSuccessfulResponse('#get-method-codes-response'))
    .fail(showFailureResponse('#get-method-codes-response'));
  };

</script>

  </div>
  
</div>

      </div>
      
      <div class="push"></div>
    </div>
    
    
    <footer>
      
      
        
      
      
      <div class="section footer-content">
        <div class="content">
          
        </div>
      </div>
    </footer>
    
    
    <script src="/assets/template/fastclick.js"></script>
    <script src="/assets/template/template.js"></script>
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

    
  </body>
  
</html>
